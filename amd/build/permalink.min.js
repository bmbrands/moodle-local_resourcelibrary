/**
 * A javascript module to display the current's filter permanent link
 *
 * @copyright  2020 CALL Learning 2020 - Laurent David laurent@call-learning.fr
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_resourcelibrary/permalink",["jquery","core/config","core/templates","core/toast","core/str","core/notification"],(function($,config,Templates,Toast,Str,Notification){var Permalink={catalogURL:null,setupCopyLink:function(triggerid,targetid){document.querySelector("#"+triggerid).addEventListener("click",(function(){document.getElementById(targetid).select(),document.execCommand("copy"),Toast.add(Str.get_string("copied","local_resourcelibrary"),null,"success")}))},init:function(){Permalink.catalogURL=new URL(window.location.href),$(document).on("resourcelibrary-filters-change",(function(e,filterarray){filterarray.forEach((function(f){const fieldname="customfield_"+f.shortname;f.value&&(Permalink.catalogURL.searchParams.append(fieldname+"[operator]",f.operator),Permalink.catalogURL.searchParams.append(fieldname+"[value]",f.value),Permalink.catalogURL.searchParams.append(fieldname+"[type]",f.type))})),Templates.render("local_resourcelibrary/permalink",{url:Permalink.catalogURL.toString()}).then((function(html,js){return Templates.replaceNodeContents("#resourcelibrary-permalink",html,js)})).catch(Notification.exception)}))}};return Permalink}));

//# sourceMappingURL=permalink.min.js.map