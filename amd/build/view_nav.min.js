define(["jquery","core/custom_interaction_events","local_resourcelibrary/repository","local_resourcelibrary/view","local_resourcelibrary/selectors"],function(a,b,c,d,e){var f={MODIFIERS:'[data-region="display-modifiers"]',SORT_OPTION:"[data-sort]",DISPLAY_OPTION:"[data-display-option]"},g=function(a,b){var d=null;"display"===a?d="local_resourcelibrary_user_view_preference":"sort"===a&&(d="local_resourcelibrary_user_sort_preference"),d&&c.updateUserPreferences({preferences:[{type:d,value:b}]})},h=function(c){var h=c.find(f.MODIFIERS);b.define(h,[b.events.activate]),h.on(b.events.activate,f.SORT_OPTION,function(b,f){var h=a(b.target);if(!h.hasClass("active")){var i=h.attr("data-sort"),j=h.attr("data-column");c.find(e.entityView.region).attr("data-sort-column",j),c.find(e.entityView.region).attr("data-sort-order",i),g("sort",j+","+i),d.init(c),f.originalEvent.preventDefault()}}),b.define(h,[b.events.activate]),h.on(b.events.activate,f.DISPLAY_OPTION,function(b,f){var h=a(b.target);if(!h.hasClass("active")){var i=h.attr("data-display-option");c.find(e.entityView.region).attr("data-display",i),g("display",i),d.reset(c),f.originalEvent.preventDefault()}})},i=function(b){b=a(b),h(b)};return{init:i}});